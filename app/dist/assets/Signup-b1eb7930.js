import{u as z,r as t,t as H,j as e,F as $,w as l,H as q,B as D,y as h,I as x,V as R,x as n,T as r,z as K,A as N,C as I,L as W,b as G}from"./index-190f9d03.js";import{V as M,a as O,T as X}from"./index-2ffb6ab5.js";import{a as Z}from"./accounts.service-b3bd5708.js";import{u as J}from"./chunk-BFUVSDI7-d53e3265.js";import{F as g}from"./chunk-7COXQURZ-bcda26dc.js";function te(){const i=J(),u=z(),d=t.useRef(null);t.useEffect(()=>{H.isAuthenticated()&&u("/")},[u]),t.useLayoutEffect(()=>()=>{var s;(s=d.current)==null||s.remove()},[]);const[p,k]=t.useState(""),[o,E]=t.useState(""),[a,L]=t.useState(""),[j,P]=t.useState(!1),[T,m]=t.useState(!1),[B,f]=t.useState(!1),[S,U]=t.useState(!1),C=a.length>=8,w=/[a-z]/.test(a),A=/[A-Z]/.test(a),b=/\d/.test(a),F=/[!@#$%^&*(),.?"]/.test(a),V=async s=>{var v;if(s.preventDefault(),U(!0),o.length>=5&&C&&w&&A&&b&&F){const y=(v=d.current)==null?void 0:v.getResponse();if(!y){i({title:"Please complete the CAPTCHA.",status:"error",isClosable:!0});return}Z.signup(p,o,a,y).then(c=>{c==="success"?(i({title:"Account created! Redirecting to login...",status:"success",isClosable:!0}),u("/login")):i({title:`${c}`,status:"error",isClosable:!0})}).catch(c=>{i({title:`${c}`,status:"error",isClosable:!0})})}};return e.jsx($,{align:"center",justify:"center",children:e.jsxs(l,{spacing:8,mx:"auto",maxW:"lg",px:{base:0,md:6},children:[e.jsx(l,{align:"center",children:e.jsx(q,{fontSize:"4xl",textAlign:"center",children:"Sign up"})}),e.jsx(D,{rounded:"lg",boxShadow:"lg",p:8,pt:{base:4,md:8},children:e.jsx("form",{children:e.jsxs(l,{spacing:4,children:[e.jsxs(h,{id:"email",isRequired:!0,children:[e.jsx(g,{children:"Email"}),e.jsx(x,{type:"email",value:p,onChange:s=>k(s.target.value)})]}),e.jsxs(h,{id:"username",isRequired:!0,children:[e.jsx(g,{children:"Username"}),e.jsx(x,{type:"text",value:o,onChange:s=>E(s.target.value),onFocus:()=>m(!0),onBlur:()=>m(!1)}),(T||S)&&e.jsx(R,{align:"start",mt:2,spacing:1,children:o.length<5&&e.jsx(n,{spacing:2,children:e.jsx(r,{color:"red.500",children:"✘ At least 5 characters"})})})]}),e.jsxs(h,{id:"password",isRequired:!0,children:[e.jsx(g,{children:"Password"}),e.jsxs(K,{children:[e.jsx(x,{type:j?"text":"password",value:a,onChange:s=>L(s.target.value),onFocus:()=>f(!0),onBlur:()=>f(!1)}),e.jsx(N,{h:"full",children:e.jsx(I,{variant:"ghost",onClick:()=>P(s=>!s),children:j?e.jsx(M,{}):e.jsx(O,{})})})]}),(B||S)&&e.jsxs(R,{align:"start",mt:2,spacing:1,children:[!C&&e.jsx(n,{spacing:2,children:e.jsx(r,{color:"red.500",children:"✘ At least 8 characters"})}),!w&&e.jsx(n,{spacing:2,children:e.jsx(r,{color:"red.500",children:"✘ Contains a lowercase letter"})}),!A&&e.jsx(n,{spacing:2,children:e.jsx(r,{color:"red.500",children:"✘ Contains an uppercase letter"})}),!b&&e.jsx(n,{spacing:2,children:e.jsx(r,{color:"red.500",children:"✘ Contains a number"})}),!F&&e.jsx(n,{spacing:2,children:e.jsx(r,{color:"red.500",children:"✘ Contains a special character"})})]})]}),e.jsxs(l,{spacing:5,pt:2,children:[e.jsx(X,{ref:d,siteKey:"0x4AAAAAAA0F-DMj5gaXa47K"}),e.jsx(I,{loadingText:"Submitting",size:"lg",onClick:V,type:"submit",children:"Sign up"})]}),e.jsxs(n,{pt:2,fontWeight:"500",children:[e.jsx(r,{children:"Already a user?"}),e.jsx(W,{as:G,to:"/login",children:"Login"})]})]})})})]})})}export{te as default};
