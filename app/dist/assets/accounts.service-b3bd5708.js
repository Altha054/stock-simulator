import{E as i,t as a}from"./index-190f9d03.js";const c="https://stockish.onrender.com/api",n=i.create({baseURL:c,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{const t=a.getToken();return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e));function u(e,t,o){return n.post("/stocks/"+e+"/"+o,{quantity:t}).then(s=>s.data.message).catch(s=>{throw console.log(s.response.data.message),new Error(s.response.data.message)})}function h(){return n.get("/user/holdings").then(e=>e.data.positions).catch(e=>{throw console.log(e),e.response?new Error(e.response.data.message):new Error(e)})}function l(e){return n.get("/user/watchlist",{data:{raw:e}}).then(t=>t.data.watchlist)}function p(e,t){return n.post("/user/watchlist/"+t+"/"+e,{}).then(o=>o.data.message).catch(o=>{throw o.response?new Error(o.response.data.message):new Error(o)})}function d(){return n.get("/user/portfolio").then(e=>({portfolioValue:e.data.portfolioValue,portfolioPrevCloseValue:e.data.portfolioPrevCloseValue,positions:e.data.positions,cash:e.data.cash}))}function g(){return n.get("/user/holdings").then(e=>e.data.cash).catch(e=>{throw e.response?new Error(e.response.data.message):new Error(e)})}function w(e){return n.get("/user/holdings").then(t=>t.data.positions.reduce((s,r)=>r.symbol===e?s+r.quantity:s,0)).catch(t=>{throw t.response?new Error(t.response.data.message):new Error(t)})}function f(e,t,o,s){return n.post("/auth/signup",{email:e,username:t,password:o,"cf-turnstile-response":s}).then(r=>"success").catch(r=>{throw new Error(r.response.data.message)})}function m(e,t,o){return n.post("/auth/login",{username:e,password:t,"cf-turnstile-response":o}).then(s=>s.data.accessToken!==void 0?(a.setTokenAndUsername(s.data.accessToken,e),"success"):"Invalid credentials.").catch(s=>{throw s.response?new Error(s.response.data.message):new Error(s)})}const k={makeTransaction:u,getPositions:h,getWatchlist:l,editWatchlist:p,getPortfolio:d,getBuyingPower:g,getAvailableShares:w,signup:f,login:m};export{k as a};
