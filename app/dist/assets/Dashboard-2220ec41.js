import{r as o,u as W,t as h,j as s,F as u,B as i,S as x,H as t,a as r,T as c,L as j,b as g}from"./index-190f9d03.js";import{a as y}from"./accounts.service-b3bd5708.js";import{u as v}from"./chunk-BFUVSDI7-d53e3265.js";import{P as N,W as C}from"./Watchlist-d9052366.js";import{u as L,N as m}from"./Newsfeed-15edf9a6.js";import"./chunk-RPO2WXNL-0d34f3d3.js";import"./chunk-2N6VWMFO-dc9323cd.js";const l=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function V(){const[e,f]=o.useState(-1),[a,p]=o.useState(0),[b,S]=o.useState(0),[d,z]=o.useState(!0),k=v(),F=W();return o.useEffect(()=>{y.getPortfolio().then(({portfolioValue:n,portfolioPrevCloseValue:w,cash:P})=>{f(n),p(w),S(P),z(!1)}).catch(n=>{n.response&&n.response.status===401&&(h.clearToken(),k({title:"You are not logged in! Redirecting to login...",status:"error",isClosable:!0}),F("/login"))})},[]),s.jsxs(u,{className:"PortfolioPreview",children:[s.jsxs(i,{flex:"0.5",children:[d?s.jsx(x,{size:"lg"}):s.jsxs(s.Fragment,{children:[s.jsx(t,{as:"h4",size:"sm",color:"gray.500",fontWeight:"600",children:"Total Investment"}),s.jsx(r,{h:"1"}),s.jsx(t,{as:"h2",size:"xl",children:l.format(e)})]}),e>0?s.jsxs(t,{as:"h2",size:"md",color:e>a?"green.500":"red.500",children:[e>a?"▲":"▼",s.jsx(c,{as:"span",fontWeight:"800",px:"1",children:l.format(e-a)}),s.jsxs(c,{as:"span",fontWeight:"500",children:["(",(100*((e-a)/a)).toFixed(Math.abs(100*((e-a)/a))<.01?4:2),"%)"," "]})]}):s.jsx(t,{as:"h2",size:"md",fontWeight:"normal",children:"Make some trades to get started!"})]}),s.jsx(i,{flex:"0.5",children:d?s.jsx(x,{size:"lg"}):s.jsxs(s.Fragment,{children:[s.jsx(t,{as:"h4",size:"sm",color:"gray.500",fontWeight:"600",children:"Cash (Buying Power)"}),s.jsx(r,{h:"1"}),s.jsx(t,{as:"h2",size:"xl",children:l.format(b)})]})})]})}function I(){const e=L({base:!0,md:!1});return s.jsxs(i,{className:"Dashboard",children:[s.jsxs(u,{direction:{base:"column",md:"row"},gap:5,children:[s.jsxs(i,{flex:"0.75",children:[h.isAuthenticated()?s.jsxs(s.Fragment,{children:[s.jsx(V,{}),s.jsx(r,{height:6})]}):s.jsxs(s.Fragment,{children:[s.jsx(t,{as:"h1",size:"xl",children:s.jsx(i,{as:"span",fontWeight:"bold",children:"Stockish"})}),s.jsxs(c,{fontSize:"lg",mb:6,children:[s.jsx(j,{as:g,to:"/signup",children:"Create an account"})," ","or"," ",s.jsx(j,{as:g,to:"/login",children:"login"})," ","to get started!"]}),s.jsx(i,{p:6,borderWidth:1,borderRadius:"md",bg:"gray.50"})]}),!e&&s.jsxs(s.Fragment,{children:[s.jsx(r,{height:10}),s.jsx(t,{size:"md",children:"Stock Market News"}),s.jsx(r,{height:2}),s.jsx(m,{symbol:""})]})]}),s.jsx(i,{flex:"0.25",borderWidth:{base:0,md:1},borderRadius:"md",p:{base:0,md:3},height:"fit-content",children:h.isAuthenticated()?s.jsxs(s.Fragment,{children:[s.jsx(N,{}),s.jsx(r,{h:"3"}),s.jsx(C,{})]}):s.jsx(i,{children:s.jsx(t,{as:"h6",size:"xs",textAlign:"center",children:"Sign in to view positions and watchlist"})})})]}),e&&s.jsxs(s.Fragment,{children:[s.jsx(r,{height:10}),s.jsx(t,{size:"md",children:"Stock Market News"}),s.jsx(r,{height:2}),s.jsx(m,{symbol:""})]})]})}export{I as default};
