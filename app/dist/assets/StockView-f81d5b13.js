import{f as _,r as u,d as D,n as M,j as n,M as Ke,h as pt,g as St,N as xt,m as ae,k as j,O as he,c as Y,o as Ye,p as ze,e as vt,s as B,P as gt,Q as At,R as yt,U as Nt,D as Qe,W as $e,w as Je,x as pe,T as V,a as H,X as Ct,C as re,B as O,F as ge,Y as It,t as Se,E as Tt,H as Et}from"./index-190f9d03.js";import{a as L}from"./accounts.service-b3bd5708.js";import{S as Pt,N as wt}from"./Newsfeed-15edf9a6.js";import{u as jt}from"./chunk-BFUVSDI7-d53e3265.js";import{S as se}from"./chunk-RPO2WXNL-0d34f3d3.js";import"./chunk-2N6VWMFO-dc9323cd.js";function Dt(e){const{value:t,defaultValue:s,onChange:a,shouldUpdate:r=(f,S)=>f!==S}=e,i=_(a),l=_(r),[c,d]=u.useState(s),m=t!==void 0,v=m?t:c,g=_(f=>{const y=typeof f=="function"?f(v):f;l(v,y)&&(m||d(y),i(y))},[m,i,v,l]);return[v,g]}function Mt(e){const t=parseFloat(e);return typeof t!="number"||Number.isNaN(t)?0:t}function qe(e,t){let s=Mt(e);const a=10**(t??10);return s=Math.round(s*a)/a,t?s.toFixed(t):s.toString()}function He(e){if(!Number.isFinite(e))return 0;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s+=1;return s}function _t(e,t,s){return e==null?e:(s<t&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(e,t),s))}function kt(e={}){const{onChange:t,precision:s,defaultValue:a,value:r,step:i=1,min:l=Number.MIN_SAFE_INTEGER,max:c=Number.MAX_SAFE_INTEGER,keepWithinRange:d=!0}=e,m=_(t),[v,g]=u.useState(()=>{var x;return a==null?"":(x=xe(a,i,s))!=null?x:""}),f=typeof r<"u",S=f?r:v,y=Ze(R(S),i),N=s??y,T=u.useCallback(x=>{x!==S&&(f||g(x.toString()),m==null||m(x.toString(),R(x)))},[m,f,S]),P=u.useCallback(x=>{let p=x;return d&&(p=_t(p,l,c)),qe(p,N)},[N,d,c,l]),C=u.useCallback((x=i)=>{let p;S===""?p=R(x):p=R(S)+x,p=P(p),T(p)},[P,i,T,S]),I=u.useCallback((x=i)=>{let p;S===""?p=R(-x):p=R(S)-x,p=P(p),T(p)},[P,i,T,S]),z=u.useCallback(()=>{var x;let p;a==null?p="":p=(x=xe(a,i,s))!=null?x:l,T(p)},[a,s,i,T,l]),ce=u.useCallback(x=>{var p;const de=(p=xe(x,i,N))!=null?p:l;T(de)},[N,i,T,l]),X=R(S);return{isOutOfRange:X>c||X<l,isAtMax:X===c,isAtMin:X===l,precision:N,value:S,valueAsNumber:X,update:T,reset:z,increment:C,decrement:I,clamp:P,cast:ce,setValue:g}}function R(e){return parseFloat(e.toString().replace(/[^\w.-]+/g,""))}function Ze(e,t){return Math.max(He(t),He(e))}function xe(e,t,s){const a=R(e);if(Number.isNaN(a))return;const r=Ze(a,t);return qe(a,s??r)}var Ae=D("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Ae.displayName="Center";var Rt={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};M(function(t,s){const{axis:a="both",...r}=t;return n.jsx(D.div,{ref:s,__css:Rt[a],...r,position:"absolute"})});var Ot=e=>n.jsx(Ke,{viewBox:"0 0 24 24",...e,children:n.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})}),Lt=e=>n.jsx(Ke,{viewBox:"0 0 24 24",...e,children:n.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})});function We(e,t,s,a){u.useEffect(()=>{var r;if(!e.current||!a)return;const i=(r=e.current.ownerDocument.defaultView)!=null?r:window,l=Array.isArray(t)?t:[t],c=new i.MutationObserver(d=>{for(const m of d)m.type==="attributes"&&m.attributeName&&l.includes(m.attributeName)&&s(m)});return c.observe(e.current,{attributes:!0,attributeFilter:l}),()=>c.disconnect()})}function Xt(e,t){const s=_(e);u.useEffect(()=>{let a=null;const r=()=>s();return t!==null&&(a=window.setInterval(r,t)),()=>{a&&window.clearInterval(a)}},[t,s])}var Ft=50,Ge=300;function Vt(e,t){const[s,a]=u.useState(!1),[r,i]=u.useState(null),[l,c]=u.useState(!0),d=u.useRef(null),m=()=>clearTimeout(d.current);Xt(()=>{r==="increment"&&e(),r==="decrement"&&t()},s?Ft:null);const v=u.useCallback(()=>{l&&e(),d.current=setTimeout(()=>{c(!1),a(!0),i("increment")},Ge)},[e,l]),g=u.useCallback(()=>{l&&t(),d.current=setTimeout(()=>{c(!1),a(!0),i("decrement")},Ge)},[t,l]),f=u.useCallback(()=>{c(!0),a(!1),m()},[]);return u.useEffect(()=>()=>m(),[]),{up:v,down:g,stop:f,isSpinning:s}}var Bt=/^[Ee0-9+\-.]$/;function Ut(e){return Bt.test(e)}function Ht(e,t){if(e.key==null)return!0;const s=e.ctrlKey||e.altKey||e.metaKey;return!(e.key.length===1)||s?!0:t(e.key)}function Wt(e={}){const{focusInputOnChange:t=!0,clampValueOnBlur:s=!0,keepWithinRange:a=!0,min:r=Number.MIN_SAFE_INTEGER,max:i=Number.MAX_SAFE_INTEGER,step:l=1,isReadOnly:c,isDisabled:d,isRequired:m,isInvalid:v,pattern:g="[0-9]*(.[0-9]+)?",inputMode:f="decimal",allowMouseWheel:S,id:y,onChange:N,precision:T,name:P,"aria-describedby":C,"aria-label":I,"aria-labelledby":z,onFocus:ce,onBlur:X,onInvalid:Te,getAriaValueText:Ee,isValidCharacter:ue,format:x,parse:p,...de}=e,me=_(ce),Pe=_(X),W=_(Te),Q=_(ue??Ut),fe=_(Ee),b=kt(e),{update:G,increment:we,decrement:je}=b,[mt,be]=u.useState(!1),$=!(c||d),k=u.useRef(null),J=u.useRef(null),De=u.useRef(null),Me=u.useRef(null),q=u.useCallback(o=>o.split("").filter(Q).join(""),[Q]),Z=u.useCallback(o=>{var h;return(h=p==null?void 0:p(o))!=null?h:o},[p]),U=u.useCallback(o=>{var h;return((h=x==null?void 0:x(o))!=null?h:o).toString()},[x]);pt(()=>{(b.valueAsNumber>i||b.valueAsNumber<r)&&(W==null||W("rangeOverflow",U(b.value),b.valueAsNumber))},[b.valueAsNumber,b.value,U,W]),St(()=>{if(!k.current)return;if(k.current.value!=b.value){const h=Z(k.current.value);b.setValue(q(h))}},[Z,q]);const ee=u.useCallback((o=l)=>{$&&we(o)},[we,$,l]),te=u.useCallback((o=l)=>{$&&je(o)},[je,$,l]),E=Vt(ee,te);We(De,"disabled",E.stop,E.isSpinning),We(Me,"disabled",E.stop,E.isSpinning);const _e=u.useCallback(o=>{if(o.nativeEvent.isComposing)return;const A=Z(o.currentTarget.value);G(q(A)),J.current={start:o.currentTarget.selectionStart,end:o.currentTarget.selectionEnd}},[G,q,Z]),ke=u.useCallback(o=>{var h,A,w;me==null||me(o),J.current&&(o.target.selectionStart=(A=J.current.start)!=null?A:(h=o.currentTarget.value)==null?void 0:h.length,o.currentTarget.selectionEnd=(w=J.current.end)!=null?w:o.currentTarget.selectionStart)},[me]),Re=u.useCallback(o=>{if(o.nativeEvent.isComposing)return;Ht(o,Q)||o.preventDefault();const h=Oe(o)*l,A=o.key,F={ArrowUp:()=>ee(h),ArrowDown:()=>te(h),Home:()=>G(r),End:()=>G(i)}[A];F&&(o.preventDefault(),F(o))},[Q,l,ee,te,G,r,i]),Oe=o=>{let h=1;return(o.metaKey||o.ctrlKey)&&(h=.1),o.shiftKey&&(h=10),h},Le=u.useMemo(()=>{const o=fe==null?void 0:fe(b.value);if(o!=null)return o;const h=b.value.toString();return h||void 0},[b.value,fe]),Xe=u.useCallback(()=>{let o=b.value;if(b.value==="")return;/^[eE]/.test(b.value.toString())?b.setValue(""):(b.valueAsNumber<r&&(o=r),b.valueAsNumber>i&&(o=i),b.cast(o))},[b,i,r]),Fe=u.useCallback(()=>{be(!1),s&&Xe()},[s,be,Xe]),ne=u.useCallback(()=>{t&&requestAnimationFrame(()=>{var o;(o=k.current)==null||o.focus()})},[t]),Ve=u.useCallback(o=>{o.preventDefault(),E.up(),ne()},[ne,E]),Be=u.useCallback(o=>{o.preventDefault(),E.down(),ne()},[ne,E]);xt(()=>k.current,"wheel",o=>{var h,A;const F=((A=(h=k.current)==null?void 0:h.ownerDocument)!=null?A:document).activeElement===k.current;if(!S||!F)return;o.preventDefault();const K=Oe(o)*l,Ue=Math.sign(o.deltaY);Ue===-1?ee(K):Ue===1&&te(K)},{passive:!1});const ft=u.useCallback((o={},h=null)=>{const A=d||a&&b.isAtMax;return{...o,ref:ae(h,De),role:"button",tabIndex:-1,onPointerDown:j(o.onPointerDown,w=>{w.button!==0||A||Ve(w)}),onPointerLeave:j(o.onPointerLeave,E.stop),onPointerUp:j(o.onPointerUp,E.stop),disabled:A,"aria-disabled":he(A)}},[b.isAtMax,a,Ve,E.stop,d]),bt=u.useCallback((o={},h=null)=>{const A=d||a&&b.isAtMin;return{...o,ref:ae(h,Me),role:"button",tabIndex:-1,onPointerDown:j(o.onPointerDown,w=>{w.button!==0||A||Be(w)}),onPointerLeave:j(o.onPointerLeave,E.stop),onPointerUp:j(o.onPointerUp,E.stop),disabled:A,"aria-disabled":he(A)}},[b.isAtMin,a,Be,E.stop,d]),ht=u.useCallback((o={},h=null)=>{var A,w,F,K;return{name:P,inputMode:f,type:"text",pattern:g,"aria-labelledby":z,"aria-label":I,"aria-describedby":C,id:y,disabled:d,...o,readOnly:(A=o.readOnly)!=null?A:c,"aria-readonly":(w=o.readOnly)!=null?w:c,"aria-required":(F=o.required)!=null?F:m,required:(K=o.required)!=null?K:m,ref:ae(k,h),value:U(b.value),role:"spinbutton","aria-valuemin":r,"aria-valuemax":i,"aria-valuenow":Number.isNaN(b.valueAsNumber)?void 0:b.valueAsNumber,"aria-invalid":he(v??b.isOutOfRange),"aria-valuetext":Le,autoComplete:"off",autoCorrect:"off",onChange:j(o.onChange,_e),onKeyDown:j(o.onKeyDown,Re),onFocus:j(o.onFocus,ke,()=>be(!0)),onBlur:j(o.onBlur,Pe,Fe)}},[P,f,g,z,I,U,C,y,d,m,c,v,b.value,b.valueAsNumber,b.isOutOfRange,r,i,Le,_e,Re,ke,Pe,Fe]);return{value:U(b.value),valueAsNumber:b.valueAsNumber,isFocused:mt,isDisabled:d,isReadOnly:c,getIncrementButtonProps:ft,getDecrementButtonProps:bt,getInputProps:ht,htmlProps:de}}var[Gt,oe]=Y({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[Kt,Ce]=Y({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),et=M(function(t,s){const a=Ye("NumberInput",t),r=ze(t),i=vt(r),{htmlProps:l,...c}=Wt(i),d=u.useMemo(()=>c,[c]);return n.jsx(Kt,{value:d,children:n.jsx(Gt,{value:a,children:n.jsx(D.div,{...l,ref:s,className:B("chakra-numberinput",t.className),__css:{position:"relative",zIndex:0,...a.root}})})})});et.displayName="NumberInput";var tt=M(function(t,s){const a=oe();return n.jsx(D.div,{"aria-hidden":!0,ref:s,...t,__css:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1,...a.stepperGroup}})});tt.displayName="NumberInputStepper";var nt=M(function(t,s){const{getInputProps:a}=Ce(),r=a(t,s),i=oe();return n.jsx(D.input,{...r,className:B("chakra-numberinput__field",t.className),__css:{width:"100%",...i.field}})});nt.displayName="NumberInputField";var st=D("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),at=M(function(t,s){var a;const r=oe(),{getDecrementButtonProps:i}=Ce(),l=i(t,s);return n.jsx(st,{...l,__css:r.stepper,children:(a=t.children)!=null?a:n.jsx(Ot,{})})});at.displayName="NumberDecrementStepper";var rt=M(function(t,s){var a;const{getIncrementButtonProps:r}=Ce(),i=r(t,s),l=oe();return n.jsx(st,{...i,__css:l.stepper,children:(a=t.children)!=null?a:n.jsx(Lt,{})})});rt.displayName="NumberIncrementStepper";var[Yt,zt,Qt,$t]=gt();function Jt(e){var t;const{defaultIndex:s,onChange:a,index:r,isManual:i,isLazy:l,lazyBehavior:c="unmount",orientation:d="horizontal",direction:m="ltr",...v}=e,[g,f]=u.useState(s??0),[S,y]=Dt({defaultValue:s??0,value:r,onChange:a});u.useEffect(()=>{r!=null&&f(r)},[r]);const N=Qt(),T=u.useId();return{id:`tabs-${(t=e.id)!=null?t:T}`,selectedIndex:S,focusedIndex:g,setSelectedIndex:y,setFocusedIndex:f,isManual:i,isLazy:l,lazyBehavior:c,orientation:d,descendants:N,direction:m,htmlProps:v}}var[qt,ie]=Y({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function Zt(e){const{focusedIndex:t,orientation:s,direction:a}=ie(),r=zt(),i=u.useCallback(l=>{const c=()=>{var C;const I=r.nextEnabled(t);I&&((C=I.node)==null||C.focus())},d=()=>{var C;const I=r.prevEnabled(t);I&&((C=I.node)==null||C.focus())},m=()=>{var C;const I=r.firstEnabled();I&&((C=I.node)==null||C.focus())},v=()=>{var C;const I=r.lastEnabled();I&&((C=I.node)==null||C.focus())},g=s==="horizontal",f=s==="vertical",S=l.key,y=a==="ltr"?"ArrowLeft":"ArrowRight",N=a==="ltr"?"ArrowRight":"ArrowLeft",P={[y]:()=>g&&d(),[N]:()=>g&&c(),ArrowDown:()=>f&&c(),ArrowUp:()=>f&&d(),Home:m,End:v}[S];P&&(l.preventDefault(),P(l))},[r,t,s,a]);return{...e,role:"tablist","aria-orientation":s,onKeyDown:j(e.onKeyDown,i)}}function en(e){const{isDisabled:t=!1,isFocusable:s=!1,...a}=e,{setSelectedIndex:r,isManual:i,id:l,setFocusedIndex:c,selectedIndex:d}=ie(),{index:m,register:v}=$t({disabled:t&&!s}),g=m===d,f=()=>{r(m)},S=()=>{c(m),!i&&!(t&&s)&&r(m)},y=At({...a,ref:ae(v,e.ref),isDisabled:t,isFocusable:s,onClick:j(e.onClick,f)}),N="button";return{...y,id:ot(l,m),role:"tab",tabIndex:g?0:-1,type:N,"aria-selected":g,"aria-controls":it(l,m),onFocus:t?void 0:j(e.onFocus,S)}}var[tn,nn]=Y({});function sn(e){const t=ie(),{id:s,selectedIndex:a}=t,i=yt(e.children).map((l,c)=>u.createElement(tn,{key:c,value:{isSelected:c===a,id:it(s,c),tabId:ot(s,c),selectedIndex:a}},l));return{...e,children:i}}function an(e){const{children:t,...s}=e,{isLazy:a,lazyBehavior:r}=ie(),{isSelected:i,id:l,tabId:c}=nn(),d=u.useRef(!1);i&&(d.current=!0);const m=Nt({wasSelected:d.current,isSelected:i,enabled:a,mode:r});return{tabIndex:0,...s,children:m?t:null,role:"tabpanel","aria-labelledby":c,hidden:!i,id:l}}function ot(e,t){return`${e}--tab-${t}`}function it(e,t){return`${e}--tabpanel-${t}`}var[rn,le]=Y({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),lt=M(function(t,s){const a=Ye("Tabs",t),{children:r,className:i,...l}=ze(t),{htmlProps:c,descendants:d,...m}=Jt(l),v=u.useMemo(()=>m,[m]),{isFitted:g,...f}=c;return n.jsx(Yt,{value:d,children:n.jsx(qt,{value:v,children:n.jsx(rn,{value:a,children:n.jsx(D.div,{className:B("chakra-tabs",i),ref:s,...f,__css:a.root,children:r})})})})});lt.displayName="Tabs";var ct=M(function(t,s){const a=Zt({...t,ref:s}),i={display:"flex",...le().tablist};return n.jsx(D.div,{...a,className:B("chakra-tabs__tablist",t.className),__css:i})});ct.displayName="TabList";var ye=M(function(t,s){const a=an({...t,ref:s}),r=le();return n.jsx(D.div,{outline:"0",...a,className:B("chakra-tabs__tab-panel",t.className),__css:r.tabpanel})});ye.displayName="TabPanel";var ut=M(function(t,s){const a=sn(t),r=le();return n.jsx(D.div,{...a,width:"100%",ref:s,className:B("chakra-tabs__tab-panels",t.className),__css:r.tabpanels})});ut.displayName="TabPanels";var Ne=M(function(t,s){const a=le(),r=en({...t,ref:s}),i={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...a.tab};return n.jsx(D.button,{...r,className:B("chakra-tabs__tab",t.className),__css:i})});Ne.displayName="Tab";var on=Qe({displayName:"MinusIcon",path:n.jsx("g",{fill:"currentColor",children:n.jsx("rect",{height:"4",width:"20",x:"2",y:"10"})})}),ln=Qe({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"});const dt={"%5EGSPC":"FOREXCOM:SPXUSD","%5EDJI":"FOREXCOM:DJI","^DJI":"FOREXCOM:DJI","%5EIXIC":"NASDAQ:IXIC","%5ERUT":"FOREXCOM:RUSUSD","%5EVIX":"TVC:VIX",AAPL:"NASDAQ:AAPL",MSFT:"NASDAQ:MSFT",GOOGL:"NASDAQ:GOOGL",AMZN:"NASDAQ:AMZN",META:"NASDAQ:META",NVDA:"NASDAQ:NVDA",TSLA:"NASDAQ:TSLA",JPM:"NYSE:JPM",BAC:"NYSE:BAC",WFC:"NYSE:WFC",GS:"NYSE:GS",MS:"NYSE:MS",WMT:"NYSE:WMT",HD:"NYSE:HD",CAT:"NYSE:CAT",BA:"NYSE:BA",GE:"NYSE:GE","SIE.DE":"XETR:SIE","ASML.AS":"EURONEXT:ASML","SAP.DE":"XETR:SAP","AIR.PA":"EURONEXT:AIR","7203.T":"TSE:7203","9984.T":"TSE:9984","005930.KS":"KRX:005930","0700.HK":"HKEX:0700","9988.HK":"HKEX:9988",SPY:"AMEX:SPY",QQQ:"NASDAQ:QQQ",DIA:"AMEX:DIA",IWM:"AMEX:IWM",VGK:"AMEX:VGK",EWJ:"AMEX:EWJ"},Ie=e=>{const t={"%5EGSPC":"FOREXCOM:SPXUSD","^GSPC":"FOREXCOM:SPXUSD","^DJI":"FOREXCOM:DJI","^IXIC":"NASDAQ:IXIC","^RUT":"FOREXCOM:RUSUSD","^VIX":"TVC:VIX","^TNX":"TVC:TNX","^TYX":"TVC:US10Y","^FVX":"TVC:US05Y","^IRX":"TVC:US02Y","^FTSE":"FOREXCOM:UKXGBP","^N225":"TVC:NI225","^HSI":"HSI","^GDAXI":"FOREXCOM:GRXEUR","^FCHI":"EURONEXT:PX1","DTL.AX":"ASX:DTL","BHP.AX":"ASX:BHP","CBA.AX":"ASX:CBA","WBC.AX":"ASX:WBC","NAB.AX":"ASX:NAB","ANZ.AX":"ASX:ANZ","EUA.L":"LSE:EUA","SUP.L":"LSE:SUP","HSBA.L":"LSE:HSBA","LLOY.L":"LSE:LLOY","BARC.L":"LSE:BARC","RIO.L":"LSE:RIO","BP.L":"LSE:BP","RY.TO":"TSX:RY","TD.TO":"TSX:TD","ENB.TO":"TSX:ENB","AIR.PA":"EURONEXT:AIR","ALV.DE":"XETR:ALV","ISP.MI":"MIL:ISP"},s=decodeURIComponent(e);return t[s]||dt[s]||s},cn=({symbol:e="NASDAQ:AAPL",width:t="1000",height:s="400",colorTheme:a="light",isTransparent:r=!0,locale:i="en"})=>(u.useEffect(()=>{const l=document.createElement("script");l.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-profile.js",l.async=!0,l.innerHTML=JSON.stringify({symbol:Ie(e),width:t,height:s,colorTheme:a,isTransparent:r,locale:i});const c=document.querySelector(".tradingview-widget-container__widget");return c==null||c.appendChild(l),()=>{c&&(c.innerHTML="")}},[e,t,s,a,r,i]),n.jsxs("div",{className:"tradingview-widget-container",children:[n.jsx("div",{className:"tradingview-widget-container__widget"}),n.jsx("div",{className:"tradingview-widget-copyright"})]})),ve=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function un(e){const[t,s]=u.useState(1),[a,r]=u.useState(0),[i,l]=u.useState(0),[c,d]=u.useState(!1),m=$e(),v=jt(),g=(f,S,y)=>{d(!0),L.makeTransaction(f,S,y?"buy":"sell").then(()=>{v({title:"Transaction submitted",description:y?"Bought ":"Sold "+S+" shares of "+f,status:"success"}),L.getBuyingPower().then(N=>{r(N)}),L.getAvailableShares(f).then(N=>{l(N)}),d(!1)}).catch(N=>{v({title:"Error "+(y?"buying":"selling")+" "+f,description:N.message,status:"error"}),d(!1)})};return u.useEffect(()=>{L.getBuyingPower().then(f=>{r(f)}),L.getAvailableShares(e.symbol).then(f=>{console.log(e.symbol,f),l(f)})},[m]),n.jsx(n.Fragment,{children:n.jsxs(lt,{children:[n.jsxs(ct,{children:[n.jsxs(Ne,{children:["Buy ",e.symbol]}),n.jsxs(Ne,{children:["Sell ",e.symbol]})]}),n.jsxs(Je,{p:"5",children:[n.jsxs(pe,{children:[n.jsx(V,{children:"Shares"}),n.jsx(H,{}),n.jsxs(et,{defaultValue:1,min:1,width:"20",onChange:f=>s(parseInt(f)),children:[n.jsx(nt,{}),n.jsxs(tt,{children:[n.jsx(rt,{}),n.jsx(at,{})]})]})]}),n.jsxs(pe,{children:[n.jsx(V,{children:"Current Price"}),n.jsx(H,{}),n.jsx(V,{children:ve.format(e.price)})]}),n.jsx(H,{}),n.jsx(Ct,{}),n.jsx(H,{}),n.jsxs(pe,{fontWeight:"bold",children:[n.jsx(V,{children:"Estimated Total"}),n.jsx(H,{}),n.jsx(V,{children:ve.format(e.price*t)})]})]}),n.jsxs(ut,{children:[n.jsxs(ye,{children:[n.jsx(re,{size:"lg",width:"100%",onClick:()=>g(e.symbol,t,!0),...c?{isLoading:!0}:{},children:"Buy"}),n.jsx(Ae,{mt:3,children:n.jsxs(V,{fontWeight:"bold",fontSize:"sm",children:[ve.format(a)," Buying Power Available"]})})]}),n.jsxs(ye,{children:[n.jsx(re,{size:"lg",width:"100%",onClick:()=>g(e.symbol,t,!1),...c?{isLoading:!0}:{},children:"Sell"}),n.jsx(Ae,{mt:3,children:n.jsxs(V,{fontWeight:"bold",fontSize:"sm",children:[i," Shares Available"]})})]})]})]})})}function dn({symbol:e,width:t="100%",height:s="600px"}){const a=u.useRef(null),r=`tradingview_${Math.random().toString(36).substring(7)}`;return u.useEffect(()=>{if(a.current){a.current.innerHTML="";const i=Ie(e),l=document.createElement("div");l.id=r,l.style.height="100%",l.style.width="100%",a.current.appendChild(l);const c=document.createElement("script");c.src="https://s3.tradingview.com/tv.js",c.async=!0,c.onload=()=>{if(window.TradingView)try{new window.TradingView.widget({autosize:!0,symbol:i,interval:"D",timezone:"Etc/UTC",theme:"light",style:"1",locale:"en",hide_top_toolbar:!1,hide_side_toolbar:!1,toolbar_bg:"#f1f3f6",enable_publishing:!1,allow_symbol_change:!1,details:!0,container_id:r,height:"100%",width:"100%"})}catch(d){console.error("TradingView widget error:",d)}},a.current.appendChild(c)}return()=>{a.current&&(a.current.innerHTML="")}},[e]),n.jsx("div",{ref:a,style:{width:t,height:s,position:"relative",display:"block",overflow:"hidden",maxWidth:"100%"}})}const mn=u.memo(dn),fn=[/-USD$/i,/-EUR$/i,/-JPY$/i,/-GBP$/i,/^BTC-/i,/^ETH-/i,/^XRP-/i,/^DOGE-/i,/^ADA-/i,/USDT$/i,/^USDC/i,/BUSD$/i,/USDD$/i],bn=e=>{if(!e)return!1;const t=e.toUpperCase();return fn.some(s=>s.test(t))},hn=({symbol:e="NASDAQ:AAPL",width:t="100%",locale:s="en",colorTheme:a="light",isTransparent:r=!0})=>{const i=u.useRef(null);return u.useEffect(()=>{if(i.current){if(i.current.innerHTML="",bn(e)){i.current.innerHTML="Cryptocurrency symbols are not supported";return}const l=Ie(e);console.log("Original symbol:",e),console.log("Final symbol:",l);const c=document.createElement("script");c.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-info.js",c.async=!0,c.innerHTML=JSON.stringify({symbol:l,width:t,locale:s,colorTheme:a,isTransparent:r}),i.current.appendChild(c)}},[e,t,s,a,r]),n.jsx("div",{ref:i})},pn=()=>n.jsxs(O,{width:"100%",children:[n.jsxs(ge,{justifyContent:"space-between",alignItems:"center",mb:4,children:[n.jsxs(Je,{width:"100%",children:[n.jsx(se,{height:"40px",width:"200px"}),n.jsx(se,{height:"24px",width:"150px"})]}),n.jsx(se,{height:"40px",width:"180px"})]}),n.jsx(se,{height:"600px",width:"100%"}),n.jsx(O,{mt:4,children:n.jsx(Pt,{mt:"4",noOfLines:6,spacing:"4",skeletonHeight:"2"})})]});function Nn(){const{symbol:e}=It(),t=$e(),s=e?dt[e]||e:"",[a,r]=u.useState(!1),[i,l]=u.useReducer((c,d)=>({...c,...d}),{symbol:s,longName:"",regularMarketPrice:-1,regularMarketChangePercent:0});return u.useEffect(()=>{Se.isAuthenticated()&&L.getWatchlist(!0).then(c=>{r(c.some(d=>d.symbol===e))}),Tt.get(`/api/stocks/${e}/info`).then(c=>{l({...c.data})}).catch(c=>{console.log(c)})},[t]),i.regularMarketPrice<0?n.jsx(pn,{}):n.jsxs(n.Fragment,{children:[i.regularMarketPrice>0&&n.jsxs(ge,{direction:{base:"column",md:"row"},width:"100%",gap:4,children:[n.jsxs(O,{width:"100%",children:[n.jsxs(ge,{justifyContent:"space-between",alignItems:"center",mb:4,flexDirection:{base:"column",sm:"row"},gap:2,children:[n.jsx(O,{width:"100%",children:n.jsx(hn,{symbol:s,width:"100%"})}),Se.isAuthenticated()&&n.jsx(O,{flexShrink:0,children:a?n.jsx(re,{leftIcon:n.jsx(on,{}),variant:"outline",onClick:()=>L.editWatchlist(e,"remove").then(()=>r(!1)),children:"Remove from Watchlist"}):n.jsx(re,{leftIcon:n.jsx(ln,{}),variant:"outline",onClick:()=>L.editWatchlist(e,"add").then(()=>r(!0)),children:"Add to Watchlist"})})]}),n.jsx(O,{width:"100%",height:{base:"400px",md:"600px"},mb:4,minWidth:{base:"300px",md:"800px"},maxWidth:"100%",overflow:"hidden",children:n.jsx(mn,{symbol:e,width:"100%",height:"100%"})}),n.jsx(O,{mt:2,children:n.jsx(cn,{symbol:e,width:"100%",height:"400"})})]}),Se.isAuthenticated()&&n.jsx(O,{width:"300px",flexShrink:0,children:n.jsx(un,{symbol:e,price:i.regularMarketPrice})})]}),n.jsxs(Et,{size:"md",mt:5,children:[e," News"]}),n.jsx(H,{height:3}),n.jsx(wt,{symbol:e})]})}export{Nn as default};
